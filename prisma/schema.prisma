generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//Models

enum TypeAsset {
  ACAO
  BDR
  CDB
  COE
  FIIS
  LCI
  LCA
  LC
  MULTIMERCADO
  TESOURODIRETO
  OPCOES
}

model Country {
  id         Int          @id @default(autoincrement())
  name       String       @db.VarChar(300)
  Investment Investment[]

  @@map("countries")
}

model User {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(300)
  email     String  @unique @db.VarChar(500)
  avatarUrl String? @db.VarChar()

  Assets     Asset[]
  Investment Investment[]

  @@index([email])
  @@map("users")
}

model Asset {
  id       Int     @id @default(autoincrement())
  name     String  @db.VarChar(20)
  code     String  @unique @db.VarChar(10)
  price    Decimal @default(0)
  quantity Float   @default(0)
  iconUrl  String? @db.VarChar()

  type         TypeAsset
  user         User?       @relation(fields: [userId], references: [id])
  userId       Int?
  Investment   Investment? @relation(fields: [investmentId], references: [id])
  investmentId Int?

  @@index([code])
  @@map("assets")
}

model Investment {
  id        Int     @id @default(autoincrement())
  total     Decimal @default(0)
  country   Country @relation(fields: [countryId], references: [id])
  countryId Int
  user      User?   @relation(fields: [userId], references: [id])
  userId    Int?
  assets    Asset[]

  @@map("investments")
}
